# Project Blueprint: Farmer App (FarmCONN)

This document outlines the file structure and key components required to run the application.

## 1. Core Application Structure

### Root Directory
- **`run.py`**: The entry point of the application. Run this file to start the server: `python run.py`.
- **`config.py`**: Configuration settings (Secret Key, Database URI, Email settings).
- **`requirements.txt`**: List of Python dependencies (Flask, Flask-SQLAlchemy, etc.).
- **`migrations/`**: Database migration scripts (generated by Flask-Migrate).
- **`instance/`**: Contains the SQLite database file (`farmer_v2.db`).

### App Package (`app/`)
- **`__init__.py`**:
    - Initializes the Flask application factory (`create_app`).
    - Sets up extensions: `db` (SQLAlchemy), `migrate` (Migrate), `login` (LoginManager), `mail` (Flask-Mail).
    - Registers Blueprints (`auth`, `main`).
- **`models.py`**: Defines database models:
    - `User`: User accounts (Nursery/Farmer roles).
    - `Product`: Items for sale.
    - `Order`: Transaction records.
    - `Message`: Direct messaging system.
    - `Post`: Forum posts.
- **`email.py`**: Helper module for sending asynchronous emails.

### Blueprints
#### Main (`app/main/`)
- **`routes.py`**: Core logic for the application.
    - Homepage (`/`, `/index`)
    - Dashboard (`/dashboard`)
    - Marketplace (`/marketplace`)
    - Product Details & Ordering (`/product/<id>`)
    - Profiles (`/profiles/<username>`)
    - Search (`/search`)
    - Chat (`/chat`)
    - Forum (`/forum`)
    - Calculator (`/calculator`)
- **`__init__.py`**: Initializes the main blueprint.

#### Auth (`app/auth/`)
- **`routes.py`**: Authentication logic.
    - Login (`/auth/login`)
    - Registration (`/auth/register`)
    - Logout (`/auth/logout`)
- **`forms.py`**: WTForms definitions.
    - `LoginForm`, `RegistrationForm`
    - `ProductForm`, `OrderForm`
    - `NurseryProfileForm`, `FarmerProfileForm`
- **`__init__.py`**: Initializes the auth blueprint.

### Templates (`app/templates/`)
HTML files using Jinja2 templating.
- **`base.html`**: Base layout (Navbar, Footer, Flash Messages).
- **`index.html`**: Landing page.
- **`login.html`, `register.html`**: Auth pages.
- **`dashboard.html`**: Nursery dashboard.
- **`profile.html`**: User profile (Public/Private views).
- **`marketplace.html`**: Product listing.
- **`product_details.html`**: Single product view + **Order Modal**.
- **`chat.html`, `forum.html`, `calculator.html`**: Feature pages.

### Static (`app/static/`)
- **`css/style.css`**: Custom styling (if applicable).
- **`js/`**: Custom JavaScript files (if applicable).

## 2. Running the Project

### Prerequisites
1.  **Python 3.x** installed.
2.  **Virtual Environment** (recommended):
    ```bash
    python -m venv venv
    venv\Scripts\activate  # Windows
    source venv/bin/activate # Mac/Linux
    ```
3.  **Dependencies**:
    ```bash
    pip install -r requirements.txt
    ```

### Configuration
1.  Set environment variables in `.env` (or `config.py` for dev):
    - `SECRET_KEY`
    - `MAIL_USERNAME` (Gmail Address)
    - `MAIL_PASSWORD` (App Password)
    - `MAIL_SERVER` (smtp.gmail.com)
    - `MAIL_PORT` (587)

### Database Setup
1.  Initialize DB (if not exists):
    ```bash
    flask db init
    flask db migrate -m "Initial migration"
    flask db upgrade
    ```
    *Note: If manual fixes were applied, ensure `manual_create_order_table.py` was run.*

### Start Server
```bash
python run.py
```
Access at: `http://127.0.0.1:5000`


not required files

Safe to Delete (One-off Scripts):

check_users.py
debug_db.py
fix_db.py
fix_db_owner.py
fix_db_product_fields.py
inspect_db.py
manual_create_order_table.py
seed_direct.py
seed_products.py
test_owner.py
test_python.py
test_search.py
test_simple.py
update_db_order.py
verify_db.py
verify_db_app.py
verify_routes.py